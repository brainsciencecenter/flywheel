#!/usr/bin/env python3

import argparse
import csv
import datetime
import flywheel
import fwgearutils
import json
import os
import re
import sys
import pyjq
import pprint

from tzlocal import get_localzone

ap = argparse.ArgumentParser()

ap.add_argument('-r', '--return-type', default='session',  action='store', help='Structured Query Return Type')
ap.add_argument('terms', nargs='+', type=str, default=None, help='Structured query terms to be anded together')

args = ap.parse_args()


fw = fwgearutils.getFW(args, Root=True)
if (not fw):
    print("{} : unable to initialize flywheel object".format(CmdName), file=sys.stderr)
    sys.exit(1)

ReturnType = args.return_type

Query = " AND ".join(args.terms)

FileResults = fw.search({'return_type': args.return_type, 'structured_query': Query})
print(json.dumps(fwgearutils.sloppyCopy(FileResults), indent=2))

sys.exit(0)

